class Carousel{constructor(t){if(this._settings=t,!this._initializeSettings(this._settings))throw"Missing required settings";this._setInitialSettings(this._settings),this._addButtonEventListeners(),this._addAutoRotationCallbacks()}_initializeSettings(t){let i={rotation:{amount:1,timingFunction:"ease-in-out",duration:500},buttons:{hide:!1,disableForSingle:!1},display:{number:5,duration:0,startOffset:0,direction:"left"},class:{itemClassName:"carousel-item"}};return void 0!==t.id&&(this._id=t.id,void 0===t.rotation.amount?this._moveAmount=i.rotation.amount:this._moveAmount=t.rotation.amount,void 0===t.rotation.duration?this._duration=i.rotation.duration:this._duration=t.rotation.duration,void 0===t.rotation.timingFunction?this._timingFunction=i.rotation.timingFunction:this._timingFunction=t.rotation.timingFunction,void 0===t.buttons.hide?this._buttonsHide=i.buttons.hide:this._buttonsHide=t.buttons.hide,void 0===t.buttons.disableForSingle?this._disableForSingle=i.buttons.disableForSingle:this._disableForSingle=t.buttons.disableForSingle,void 0===t.display.number?this._displayNo=i.display.number:this._displayNo=t.display.number,void 0===t.display.duration?this._rotationDuration=i.display.duration:this._rotationDuration=t.display.duration,void 0===t.display.startOffset?this._startOffset=i.display.startOffset:this._startOffset=t.display.startOffset,void 0===t.display.direction?this._direction=i.display.direction:this._direction=t.display.direction,void 0===t.class.itemClassName?this._itemClassName=i.class.itemClassName:this._itemClassName=t.class.itemClassName,!0)}_setInitialSettings(t){if(document.documentElement.style.setProperty("--timingFunction",this._timingFunction),document.documentElement.style.setProperty("--duration",this._duration+"ms"),this._container=document.getElementById(this._id),!this._container)throw"Container does not exist";if(this._items=this._container.getElementsByClassName(this._itemClassName),this._totalItems=this._items.length,this._front=0,this._back=this._displayNo-1,this._elements=[...this._items],this._buttonsHide){let t=this._container.getElementsByClassName("carousel-button-next");for(let i=0;i<t.length;i++)t[i].style.display="none";t=this._container.getElementsByClassName("carousel-button-prev");for(let i=0;i<t.length;i++)t[i].style.display="none"}if(this._disableForSingle&&1===this._totalItems){this._duration=0;let t=this._container.getElementsByClassName("carousel-button-next");for(let i=0;i<t.length;i++)t[i].style.display="none";t=this._container.getElementsByClassName("carousel-button-prev");for(let i=0;i<t.length;i++)t[i].style.display="none"}this._moving=!1;for(let t=0;t<this._displayNo;t++)this._items[t]&&this._items[t].classList.add("active");if(this._displayNo>this._totalItems){let t=0;for(let i=0;i<this._displayNo-this._totalItems;i++){let i=this._elements[t].cloneNode(!0);this._container.firstElementChild.appendChild(i),t=this._mod(t+1,this._totalItems)}}this._container.style.maxWidth=this._container.clientWidth+"px",this._container.style.width="100%"}_addButtonEventListeners(){let t,i;t=this._settings.nextBtnClass?document.getElementsByClassName(this._settings.nextBtnClass)[0]:document.getElementsByClassName("carousel-button-next")[0],i=this._settings.backBtnClass?document.getElementsByClassName(this._settings.backBtnClass)[0]:document.getElementsByClassName("carousel-button-prev")[0],t&&t.addEventListener("click",()=>{this.moveNext()}),i&&i.addEventListener("click",()=>{this.movePrev()})}_addAutoRotationCallbacks(){let t=t=>window.setInterval(()=>{this.moveNext()},t),i=t=>window.setInterval(()=>{this.movePrev()},t);this._rotationDuration>0&&this._direction&&("right"===this._direction?setTimeout(()=>{this._rotation=t(this._rotationDuration)},this._startOffset):setTimeout(()=>{this._rotation=i(this._rotationDuration)},this._startOffset))}_removeAutoRotationCallbacks(){window.clearInterval(this._rotation)}_mod(t,i){return(t%i+i)%i}_disableInteraction(){this._moving=!0}_enableInteraction(){this._moving=!1}_moveCarouselLeft(t){return new Promise((i,s)=>{if(this._moving)i("done");else{this._disableInteraction(),this._front=this._mod(this._front+t,this._totalItems),this._back=this._mod(this._back+t,this._totalItems);let s=0;for(let i=0;i<t;i++)s+=this._items[i].offsetWidth;document.documentElement.style.setProperty("--moveAmount","-"+s+"px");let e=this._totalItems-t,o=this._mod(this._front+e,this._totalItems);for(let i=0;i<t;i++){let t=this._elements[o].cloneNode(!0);t.classList.remove("active"),this._container.firstElementChild.appendChild(t),o=this._mod(o+1,this._totalItems)}for(let i=0;i<this._displayNo+t;i++)this._items[i].classList.add("active");for(let t=0;t<this._items.length;t++)this._items[t].classList.add("slide");this._animationTimeout=setTimeout(()=>{for(let t=0;t<this._items.length;t++)this._items[t].classList.remove("slide");for(let i=0;i<t;i++)this._items[0].remove();this._enableInteraction(),i("done")},this._duration+10)}})}_moveCarouselRight(t){return new Promise((i,s)=>{if(this._moving)i("done");else{this._disableInteraction(),this._front=this._mod(this._front-t,this._totalItems),this._back=this._mod(this._back-t,this._totalItems);let s=0;for(let i=0;i<t;i++)s+=this._items[i].offsetWidth;document.documentElement.style.setProperty("--moveAmount","-"+s+"px");for(let t=0;t<this._items.length;t++)this._items[t].classList.add("startOffset");let e=this._mod(this._front+t-1,this._totalItems);for(let i=0;i<t;i++){let t=this._elements[e].cloneNode(!0);t.classList.add("startOffset"),this._items[0].parentNode.insertBefore(t,this._items[0]),e=this._mod(e-1,this._totalItems)}for(let i=0;i<this._displayNo+t;i++)this._items[i].classList.add("active");this._animationTimeout=setTimeout(()=>{for(let t=0;t<this._items.length;t++)this._items[t].classList.remove("slide"),this._items[t].classList.remove("startOffset");for(let i=0;i<t;i++)this._items[this._totalItems].remove();this._enableInteraction(),i("done")},this._duration+10)}})}_updateDisplayDuration(t){if(t<0)throw"Duration cannot be negative";return 0===t?(this._duration=0,this._removeRotationEventListeners()):0===this._duration&&(this._duration=t,this._addRotationEventListeners()),!0}updateSettings(t){return new Promise((i,s)=>{this._removeAutoRotationCallbacks(),this._animationTimeout.then(()=>{this._initializeSettings(t),this._setInitialSettings(t),this._addAutoRotationCallbacks(),this._settings=t,i("Settings updated")})})}moveNext(){this._animationTimeout=this._moveCarouselRight(this._moveAmount)}movePrev(){this._animationTimeout=this._moveCarouselLeft(this._moveAmount)}}